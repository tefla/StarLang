{
  "id": "switch-animated",
  "name": "Animated Wall Switch",
  "description": "Wall switch with animated button and status LED",
  "anchor": { "x": 0, "y": 0, "z": 0 },

  "voxels": [
    { "offset": [0, 0, 0], "type": "SWITCH" },
    { "offset": [0, 1, 0], "type": "SWITCH" },
    { "offset": [0, 2, 0], "type": "SWITCH" },
    { "offset": [0, 3, 0], "type": "SWITCH" },
    { "offset": [0, 4, 0], "type": "SWITCH" },
    { "offset": [0, 5, 0], "type": "SWITCH" },
    { "offset": [0, 6, 0], "type": "SWITCH" },
    { "offset": [0, 7, 0], "type": "SWITCH" },
    { "offset": [0, 8, 0], "type": "SWITCH" },
    { "offset": [0, 9, 0], "type": "SWITCH" },
    { "offset": [0, 10, 0], "type": "SWITCH" },
    { "offset": [1, 0, 0], "type": "SWITCH" },
    { "offset": [1, 1, 0], "type": "SWITCH" },
    { "offset": [1, 2, 0], "type": "SWITCH" },
    { "offset": [1, 3, 0], "type": "SWITCH" },
    { "offset": [1, 4, 0], "type": "SWITCH" },
    { "offset": [1, 5, 0], "type": "SWITCH" },
    { "offset": [1, 6, 0], "type": "SWITCH" },
    { "offset": [1, 7, 0], "type": "SWITCH" },
    { "offset": [1, 8, 0], "type": "SWITCH" },
    { "offset": [1, 9, 0], "type": "SWITCH" },
    { "offset": [1, 10, 0], "type": "SWITCH" },
    { "offset": [2, 0, 0], "type": "SWITCH" },
    { "offset": [2, 1, 0], "type": "SWITCH" },
    { "offset": [2, 2, 0], "type": "SWITCH" },
    { "offset": [2, 3, 0], "type": "SWITCH" },
    { "offset": [2, 4, 0], "type": "SWITCH" },
    { "offset": [2, 5, 0], "type": "SWITCH" },
    { "offset": [2, 6, 0], "type": "SWITCH" },
    { "offset": [2, 7, 0], "type": "SWITCH" },
    { "offset": [2, 8, 0], "type": "SWITCH" },
    { "offset": [2, 9, 0], "type": "SWITCH" },
    { "offset": [2, 10, 0], "type": "SWITCH" }
  ],

  "dynamicParts": [
    {
      "id": "button",
      "voxels": [
        { "offset": [0, 0, 0], "type": "SWITCH_BUTTON" },
        { "offset": [1, 0, 0], "type": "SWITCH_BUTTON" },
        { "offset": [0, 1, 0], "type": "SWITCH_BUTTON" },
        { "offset": [1, 1, 0], "type": "SWITCH_BUTTON" }
      ],
      "anchor": { "x": 0, "y": 0, "z": 0 },
      "transform": {
        "position": [0.5, 4, 1]
      }
    },
    {
      "id": "indicator",
      "voxels": [
        { "offset": [0, 0, 0], "type": "LED_GREEN" }
      ],
      "anchor": { "x": 0, "y": 0, "z": 0 },
      "transform": {
        "position": [1, 8, 1]
      }
    }
  ],

  "states": {
    "idle": {
      "parts": {
        "button": { "position": [0.5, 4, 1] },
        "indicator": { "emissive": "#00ff00", "emissiveIntensity": 0.3 }
      }
    },
    "pressed": {
      "parts": {
        "button": { "position": [0.5, 4, 0.5] },
        "indicator": { "emissive": "#00ff00", "emissiveIntensity": 1.0 }
      }
    },
    "fault": {
      "parts": {
        "button": { "position": [0.5, 4, 1] },
        "indicator": { "emissive": "#ff0000", "emissiveIntensity": 0.5 }
      }
    },
    "fault-bright": {
      "parts": {
        "button": { "position": [0.5, 4, 1] },
        "indicator": { "emissive": "#ff0000", "emissiveIntensity": 1.0 }
      }
    },
    "fault-dim": {
      "parts": {
        "button": { "position": [0.5, 4, 1] },
        "indicator": { "emissive": "#ff0000", "emissiveIntensity": 0.1 }
      }
    }
  },

  "animations": {
    "press": {
      "duration": 200,
      "keyframes": [
        { "time": 0, "state": "idle" },
        { "time": 0.3, "state": "pressed", "easing": "easeOutQuad" },
        { "time": 0.7, "state": "pressed" },
        { "time": 1.0, "state": "idle", "easing": "easeInQuad" }
      ]
    },
    "blink": {
      "duration": 800,
      "loop": true,
      "keyframes": [
        { "time": 0, "state": "fault-bright" },
        { "time": 0.4, "state": "fault-dim", "easing": "easeInOut" },
        { "time": 0.6, "state": "fault-dim" },
        { "time": 1.0, "state": "fault-bright", "easing": "easeInOut" }
      ]
    }
  },

  "stateBindings": {
    "status": {
      "OK": { "setState": "idle", "stopAnimation": "blink" },
      "FAULT": { "setState": "fault", "playAnimation": "blink" }
    }
  },

  "parameters": {
    "status": { "type": "enum", "values": ["OK", "FAULT"], "default": "OK" }
  }
}
